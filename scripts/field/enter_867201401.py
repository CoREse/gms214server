# id 867201401 (Abrup Basin : Eyeful Treasure Trove), field 867201401
sm.lockInGameUI(True, False)
sm.setMapTaggedObjectVisible("close", True, 0, 0)
sm.setMapTaggedObjectVisible("open", False, 0, 0)
sm.startQuest(64074)
sm.forcedFlip(True)
sm.spawnNpc(9400580, 0, 250)
sm.showNpcSpecialActionByTemplateId(9400580, "summon", 0)
sm.spawnNpc(9400595, -125, 250)
sm.showNpcSpecialActionByTemplateId(9400595, "summon", 0)
sm.sendDelay(500)
sm.forcedMove(False, 40)
sm.setSpeakerType(3)
sm.setParam(37)
sm.setColor(1)
sm.setInnerOverrideSpeakerTemplateID(9400580) # Alika
sm.sendNext("#face5#Ahh! ")
sm.setParam(57)
sm.sendSay("#bAre you okay, Alika? Where are we? ")
sm.sendDelay(500)
sm.moveNpcByTemplateId(9400580, False, 200, 80)
sm.sendDelay(500)
sm.forcedMove(False, 100)
sm.sendDelay(500)
sm.flipNpcByTemplateId(9400580, True)
sm.sendDelay(500)
sm.forcedFlip(True)
sm.sendDelay(500)
sm.flipNpcByTemplateId(9400580, False)
sm.sendDelay(500)
sm.setParam(37)
sm.sendNext("#face3#A... treasure vault? ")
sm.sendDelay(500)
sm.moveNpcByTemplateId(9400580, False, 200, 80)
sm.sendDelay(500)
sm.sendNext("#face1#There's treasure everywhere! Loads of it! ")
sm.sendDelay(500)
sm.forcedMove(False, 120)
sm.sendDelay(1500)
sm.flipNpcByTemplateId(9400580, True)
sm.sendDelay(1000)
sm.setMapTaggedObjectVisible("close", False, 0, 0)
sm.setMapTaggedObjectVisible("open", True, 0, 0)
sm.playSound("Sound/PL_MONAD.img/EP1/ACT2/eyeeyebox", 128)
sm.sendDelay(1000)
sm.showEffect("Effect/OnUserEff.img/questEffect/PL_MONAD1/3", 0, 0, 0, 0, 33661394, 0, 0)
sm.sendDelay(500)
sm.sendNext("#face1#Eh? Isn't this the brooch Cayne lost? ")
sm.setParam(57)
sm.sendSay("#bNow we know who the thief of Abrup is. ")
sm.spawnNpc(9400610, 730, 250)
sm.showNpcSpecialActionByTemplateId(9400610, "summon", 0)
sm.sendDelay(500)
sm.moveNpcByTemplateId(9400610, True, 30, 50)
sm.sendDelay(1000)
sm.flipNpcByTemplateId(9400580, False)
sm.sendDelay(5000)
sm.flipNpcByTemplateId(9400580, True)
sm.sendDelay(500)
sm.showEffect("Effect/OnUserEff.img/questEffect/PL_MONAD1/4", 0, 0, 0, 0, 33661394, 0, 0)
sm.setParam(37)
sm.sendNext("#face0#Hmm, this necklace has some fine workmanship. ")
sm.sendSay("#face0#...All of these items must have been precious to their owners. Why don't we return them? ")
sm.setParam(57)
sm.sendSay("#bThat's a great idea. ")
sm.setParam(37)
sm.sendSay("#face0#I don't want to slow you down if you have to fight, so I'll hang on to these. ")
sm.sendDelay(500)
sm.moveNpcByTemplateId(9400580, True, 100, 50)
sm.sendDelay(500)
sm.setParam(57)
sm.sendNext("#bAren't they heavy? ")
sm.setParam(37)
sm.sendSay("#face1#Hey, I have to help you out somehow! ")
sm.sendSay("#face1#Okay, let's get going! ")
sm.sendDelay(500)
sm.moveNpcByTemplateId(9400580, True, 300, 80)
sm.sendDelay(500)
sm.forcedFlip(True)
sm.forcedMove(True, 300)
sm.sendDelay(1000)
sm.blind(True, 255, 0, 0, 0, 500)
sm.sendDelay(500)
sm.lockInGameUI(False, True)
sm.setInnerOverrideSpeakerTemplateID(9400610) # Eyeful
sm.sendNext("Brrrrrrrrrr!!!!")
sm.playExclSoundWithDownBGM("Field.img/masteryBook/EnchantSuccess", 100)
sm.completeQuestNoCheck(64074)
sm.createQuestWithQRValue(64272, "0=4;2=1")
sm.warp(867201501)
