# id 867200403 (Abrup Basin : Kaptafel Ashes), field 867200403
sm.setMapTaggedObjectVisible("q64025Obj", False, 0, 0)
sm.showNpcSpecialActionByTemplateId(9400587, "summon", 0)
sm.showNpcSpecialActionByTemplateId(9400580, "summon", 0)
sm.showNpcSpecialActionByTemplateId(9400593, "summon", 0)
sm.showNpcSpecialActionByTemplateId(9400591, "summon", 0)
sm.showNpcSpecialActionByTemplateId(9400582, "summon", 0)
sm.lockInGameUI(True, False)
sm.startQuest(64019)
sm.forcedFlip(True)
sm.sendDelay(500)
sm.moveNpcByTemplateId(9400587, False, 380, 100)
sm.sendDelay(5000)
sm.setSpeakerType(3)
sm.setParam(37)
sm.setColor(1)
sm.setInnerOverrideSpeakerTemplateID(9400587) # Kan
sm.sendNext("#face0#I want to thank everyone who came together to help the town... ")
sm.setInnerOverrideSpeakerTemplateID(9400582) # Cayne
sm.sendSay("#face1#Save your thanks, Chief Kan. It is our sworn duty to aid you in these trying times. ")
sm.sendDelay(500)
sm.flipNpcByTemplateId(9400582, False)
sm.sendDelay(500)
sm.sendNext("#face1#Ah! I almost forgot. Allow me to present #h0#, our newest ally. ")
sm.setInnerOverrideSpeakerTemplateID(9400587) # Kan
sm.sendSay("#face0#I cannot thank you enough for your aid, my friend. I am Kan, Chief of Kaptafel. ")
sm.flipNpcByTemplateId(9400582, True)
sm.sendDelay(500)
sm.sendNext("#face0#It is a miracle that all of you gathered here are mostly unhurt. ")
sm.setInnerOverrideSpeakerTemplateID(9400580) # Alika
sm.sendSay("#face0#What of the other villagers? If you don't mind me asking. ")
sm.flipNpcByTemplateId(9400587, True)
sm.sendDelay(500)
sm.setInnerOverrideSpeakerTemplateID(9400587) # Kan
sm.sendNext("#face0#I can't say for sure. I know there were many injuries...")
sm.sendSay("#face0#I was just about to check on everyone else, so if you'll please excuse me...")
sm.moveNpcByTemplateId(9400587, True, 120, 100)
sm.sendDelay(500)
sm.playSound("Sound/PL_MONAD.img/EP1/ACT1/hawaru3", 128)
sm.speechBalloon(False, 0, 0, "Waaah... waa...", 2000, 1, 0, 0, 0, 4, 9400593, 4878499)
sm.sendDelay(3000)
sm.flipNpcByTemplateId(9400587, False)
sm.sendDelay(2000)
sm.playSound("Sound/PL_MONAD.img/EP1/ACT1/hawaru1", 128)
sm.flipNpcByTemplateId(9400587, True)
sm.sendDelay(1000)
sm.speechBalloon(True, 0, 0, "Waa... Mommy!!", 2000, 1, 0, 0, 0, 4, 9400593, 4878499)
sm.flipNpcByTemplateId(9400587, False)
sm.sendDelay(500)
sm.moveNpcByTemplateId(9400587, False, 10, 50)
sm.sendNext("#face1#Shulla, I know this is hard for you... But you're not the only one who's suffering now. ")
sm.sendSay("#face1#There's more than enough sorrow to go around, but the others are managing it. You cannot lose yourself to this despair. ")
sm.flipNpcByTemplateId(9400587, True)
sm.sendDelay(2000)
sm.flipNpcByTemplateId(9400587, False)
sm.sendNext("#face0#Please, think of the child you still have. Now is not the time to fret over keepsakes. ")
sm.setInnerOverrideSpeakerTemplateID(9400591) # Shulla
sm.sendSay("Ahh... K-Kan... Waaaa... ")
sm.sendDelay(1000)
sm.flipNpcByTemplateId(9400587, True)
sm.moveNpcByTemplateId(9400587, True, 500, 100)
sm.sendDelay(5000)
sm.speechBalloon(True, 0, 0, "Waaah... Sniff... ", 2000, 1, 0, 0, 0, 4, 9400591, 4878499)
sm.setInnerOverrideSpeakerTemplateID(9400582) # Cayne
sm.sendNext("#face0#Hng! How can he say something so callous! ")
sm.sendDelay(3000)
sm.speechBalloon(True, 0, 0, "Haah...", 2000, 1, 0, 0, 0, 4, 9400591, 4878499)
sm.setInnerOverrideSpeakerTemplateID(9400580) # Alika
sm.sendNext("#face3#...We should give her some space.")
sm.sendDelay(1000)
sm.moveNpcByTemplateId(9400582, True, 200, 80)
sm.sendDelay(500)
sm.forcedMove(True, 150)
sm.sendDelay(2000)
sm.flipNpcByTemplateId(9400580, True)
sm.sendDelay(250)
sm.createQuestWithQRValue(49003, "QET=20190622184711")
sm.createQuestWithQRValue(49000, "count=0;Quest=49003;day=152843;QET=20190622165245;state=1")
sm.createQuestWithQRValue(49000, "count=0;Quest=49003;day=152843;QET=20190622165245;state=2")
sm.createQuestWithQRValue(49000, "count=0;Quest=49003;day=152843;QET=20190622181711;state=2")
sm.startQuest(49003)
sm.moveNpcByTemplateId(9400580, True, 750, 80)
sm.sendDelay(500)
sm.moveNpcByTemplateId(9400582, True, 775, 80)
sm.sendDelay(500)
sm.forcedMove(True, 900)
sm.sendDelay(3000)
sm.sendDelay(3000)
sm.speechBalloon(True, 0, 0, "...", 2000, 1, 0, 0, 0, 4, 9400582, 4878499)
sm.sendDelay(1000)
sm.speechBalloon(True, 0, 0, "...", 2000, 1, 0, 0, 0, 4, 9400582, 4878499)
sm.setInnerOverrideSpeakerTemplateID(9400582) # Cayne
sm.sendNext("#face0#Brr! Now that the fires are out, it's pretty chilly around here. ")
sm.sendSay("#face0#I swear, I will never get used to this cold. Alika, are you okay? ")
sm.setInnerOverrideSpeakerTemplateID(9400580) # Alika
sm.sendSay("#face0#...I'm okay. ")
sm.setInnerOverrideSpeakerTemplateID(9400582) # Cayne
sm.sendSay("#face0#What about you, #h0#? ")
sm.setParam(57)
sm.sendSay("#bI'm okay. ")
sm.setParam(37)
sm.sendSay("#face0#Am I the ONLY one freezing to death here? You must be native to Abrup, #h0#. I don't know how else you could deal with this. ")
sm.setParam(57)
sm.sendSay("#bNo, this is my first time in Abrup. ")
sm.setParam(37)
sm.sendSay("#face0#Really? Do tell! What brought you here? I can't imagine it was for sightseeing. ")
sm.flipNpcByTemplateId(9400580, False)
sm.sendDelay(500)
sm.setInnerOverrideSpeakerTemplateID(9400580) # Alika
sm.sendNext("#face0#This isn't the time, Cayne... ")
sm.setInnerOverrideSpeakerTemplateID(9400582) # Cayne
sm.sendSay("#face0#Well, why not? Surely our friend is as curious about our mission as I am about theirs. ")
sm.setParam(57)
sm.sendSay("#bNow that you mention it... What are you doing here? ")
sm.setParam(37)
sm.sendSay("#face0#We don't actually have much in the way of details. We were only dispatched here recently. ")
sm.sendSay("#face0#Our orders were to investigate unusually active monsters in the Abrup Basin, and address the situation before things got out of hand. Obviously, that last part didn't really pan out. ")
sm.sendDelay(250)
sm.moveNpcByTemplateId(9400582, True, 80, 120)
sm.flipNpcByTemplateId(9400580, True)
sm.sendDelay(2000)
sm.flipNpcByTemplateId(9400582, False)
sm.sendDelay(250)
sm.sendNext("#face1#The investigation is being handled by... Ta-dah! The youngest, most talented scholar of Afinas, Alika! ")
sm.setInnerOverrideSpeakerTemplateID(9400580) # Alika
sm.sendSay("#face0#I'm... just an apprentice. ")
sm.sendDelay(250)
sm.moveNpcByTemplateId(9400580, True, 500, 80)
sm.sendDelay(500)
sm.forcedMove(True, 470)
sm.flipNpcByTemplateId(9400582, True)
sm.sendDelay(2000)
sm.moveNpcByTemplateId(9400582, True, 390, 80)
sm.setInnerOverrideSpeakerTemplateID(9400582) # Cayne
sm.sendNext("#face1#Nonsense! True scholarship comes from the heart. And you'll soon have the title to match! You'll see! ")
sm.sendSay("#face0#Anyway, that's our story. Unfortunately, we were completely unprepared for how bad the situation is here. ")
sm.sendSay("#face0#We're simply not equipped to deal with a full-scale invasion like what we faced today.")
sm.sendDelay(1500)
sm.flipNpcByTemplateId(9400582, True)
sm.sendNext("#face0#And we've reported as much to our commanders, but they only directed us to aid the residents as best we can. ")
sm.sendSay("#face0#What could they possibly expect of us? There's only so much... ")
sm.setInnerOverrideSpeakerTemplateID(9400580) # Alika
sm.sendSay("#face0#You're too cavalier, Cayne. The reputation of Afinas is at stake here. We have our orders. ")
sm.setInnerOverrideSpeakerTemplateID(9400582) # Cayne
sm.sendSay("#face0#You're right, of course. But even you can admit that last battle was hardly ideal. ")
sm.setParam(57)
sm.sendSay("#bI see... ")
sm.setParam(37)
sm.sendSay("#face0#By the way... ")
sm.sendDelay(500)
sm.flipNpcByTemplateId(9400582, False)
sm.sendDelay(500)
sm.flipNpcByTemplateId(9400580, False)
sm.sendDelay(500)
sm.sendNext("#face0#When we first arrived in town, everyone was very tense. ")
sm.sendSay("#face0#We looked into it, and apparently dozens of people went missing about six months ago. All at the same time! ")
sm.sendSay("#face0#That sweet lady looking for her daughter's keepsakes, the cold-blooded chief... They lost their families, as did most of the townsfolk.")
sm.setParam(57)
sm.sendSay("#b(And the old lady in the letter...) ")
sm.setParam(37)
sm.sendSay("#face0#Between the disappearances and the attacks, Kaptafel is in dire need of a guardian angel, wouldn't you say? ")
sm.sendSay("#face0#Lucky for them, they have one now! Mighty Cayne of Afinas, serving the people in need! ")
sm.setInnerOverrideSpeakerTemplateID(9400580) # Alika
sm.sendSay("#face0#Goodness, Cayne... You don't have to be grim about the odds but you don't have to be... THAT, either. ")
sm.setInnerOverrideSpeakerTemplateID(9400582) # Cayne
sm.sendSay("#face0#Hmph. ")
sm.sendSay("#face0#I really do want to protect this town... but I have to be honest that we're not doing a great job of it. ")
sm.setParam(57)
sm.sendSay("#bSpeaking of which... What happened to the giant monster that attacked? ")
sm.showEffect("Effect/OnUserEff.img/emotion/what", 0, 0, 0, 0, 16865201, 0, 0)
sm.sendDelay(500)
sm.setParam(37)
sm.sendNext("#face0#Which one? The Yeti? Or the Shrelephant? Either way it was probably me.")
sm.setParam(57)
sm.sendSay("#bNo, the REALLY big one. With the tentacles, and... Well, I only saw it from the ridge. ")
sm.setParam(37)
sm.sendSay("#face0#The biggest creature I saw was the wolf with its pants on fire. Luckily there was nothing else more imposing than that. ")
sm.setParam(57)
sm.sendSay("#bAh... I may have been mistaken. ")
sm.sendSay("#b(...Or I really did see something huge moving in the smoke. At least it didn't attack the town too.) ")
sm.sendSay("#b(Could someone else have seen it?) ")
sm.completeQuestNoCheck(64019)
sm.startQuest(64020)
sm.spawnNpc(9400589, -1150, 330)
sm.showNpcSpecialActionByTemplateId(9400589, "summon", 0)
sm.flipNpcByTemplateId(9400580, True)
sm.flipNpcByTemplateId(9400582, True)
sm.sendDelay(250)
sm.moveNpcByTemplateId(9400580, True, 300, 80)
sm.sendDelay(500)
sm.moveNpcByTemplateId(9400582, True, 280, 80)
sm.sendDelay(500)
sm.forcedMove(True, 280)
sm.sendDelay(3000)
sm.setParam(37)
sm.setInnerOverrideSpeakerTemplateID(9400580) # Alika
sm.sendNext("#face1#Ah, Peytour!")
sm.sendDelay(250)
sm.flipNpcByTemplateId(9400589, False)
sm.sendDelay(250)
sm.setInnerOverrideSpeakerTemplateID(9400589) # Peytour
sm.sendNext("#face0#Ah, Alika. I am glad to see you're safe. ")
sm.sendDelay(250)
sm.moveNpcByTemplateId(9400580, True, 250, 80)
sm.sendDelay(250)
sm.moveNpcByTemplateId(9400582, True, 250, 80)
sm.forcedMove(True, 350)
sm.sendDelay(1000)
sm.setInnerOverrideSpeakerTemplateID(9400580) # Alika
sm.sendNext("#face3#Peytour... Were you injured? ")
sm.setInnerOverrideSpeakerTemplateID(9400589) # Peytour
sm.sendSay("#face0#Hah, just a scratch. We're quite lucky no one was seriously injured. ")
sm.sendSay("#face0#You. I saw you saving people during the chaos. I would ask who you are and why you're here, if you care to speak about it. ")
sm.setParam(57)
sm.sendSay("#bMy name is #h0#. I'm here because of a letter asking for help. ")
sm.setParam(37)
sm.sendSay("#face0#A letter, you say? How remarkable. Who would have sent a letter in the midst of all this? ")
sm.sendSay("#face0#I am intrigued by your story, but there is no time for that now. If you are willing, I could use another set of hands. ")
sm.sendSay("#face0#We've run out of space to treat the injured, so I intend to fix this building up to house more of our people. ")
sm.sendSay("#face1#But as you can see, this is a tall order even for one such as myself. Hah... ")
sm.sendSay("#face0#The first order of business is gathering new wood for repairs. If you have time, your help would be appreciated. ")
sm.setInnerOverrideSpeakerTemplateID(9400580) # Alika
sm.sendSay("#face1#Of course! Cayne and #h0# would be happy to help. ")
sm.sendDelay(250)
sm.flipNpcByTemplateId(9400580, False)
sm.sendDelay(250)
sm.sendNext("#face1#Right? ")
sm.sendDelay(1000)
sm.sendDelay(1000)
sm.speechBalloon(True, 0, 0, "#b...", 3000, 1, 0, 0, 0, 4, 0, 4878499)
sm.sendDelay(2000)
sm.speechBalloon(True, 0, 0, "...", 2000, 1, 0, 0, 0, 4, 9400582, 4878499)
sm.setInnerOverrideSpeakerTemplateID(9400582) # Cayne
sm.sendNext("#face0#I need to remain with you, Alika. My duty is to protect you. ")
sm.sendDelay(250)
sm.setInnerOverrideSpeakerTemplateID(9400580) # Alika
res = sm.sendNext("#face3##h0#?#b\r\n#L0# Sure, I can help. #l\r\n#L1# I'm very sorry, but I have other matters to attend to.#l")
sm.sendNext("#face0#Thanks. I had a feeling you'd be willing to help, #h0#. Cayne, you should join them if you can. ")
sm.setInnerOverrideSpeakerTemplateID(9400582) # Cayne
sm.sendSay("#face0#Alika, no... ")
sm.setInnerOverrideSpeakerTemplateID(9400580) # Alika
sm.sendSay("#face0#Cayne, isn't your mission to keep me safe? I think I'll be safer when the village is in a better state. ")
sm.showEffect("Effect/OnUserEff.img/emotion/shade", 0, 0, 0, 0, 16865201, 0, 0)
sm.setInnerOverrideSpeakerTemplateID(9400582) # Cayne
sm.sendSay("#face0#Sigh... I'll be back soon, so stay close to the knights. ")
sm.setInnerOverrideSpeakerTemplateID(9400589) # Peytour
sm.sendSay("#face0#Please, both of you... There's no need to force yourselves. ")
sm.setInnerOverrideSpeakerTemplateID(9400582) # Cayne
sm.sendSay("#face0#Not at all. Now, let us make haste! ")
sm.setInnerOverrideSpeakerTemplateID(9400589) # Peytour
sm.sendSay("#face0#Ah, so much energy. You do not disappoint, Cayne! #h0#, are you ready as well? ")
sm.setParam(57)
sm.sendSay("#bSure, let's get to it. ")
sm.setParam(37)
sm.sendSay("#face0#Then we're off!")
sm.startQuest(64021)
sm.sendDelay(250)
sm.flipNpcByTemplateId(9400589, True)
sm.sendDelay(250)
sm.moveNpcByTemplateId(9400589, True, 1000, 80)
sm.sendDelay(250)
sm.spawnNpc(9400585, -2050, 235)
sm.showNpcSpecialActionByTemplateId(9400585, "summon", 0)
sm.spawnNpc(9400585, -2100, 235)
sm.showNpcSpecialActionByTemplateId(9400585, "summon", 0)
sm.moveNpcByTemplateId(9400585, False, 400, 100)
sm.sendDelay(250)
sm.moveNpcByTemplateId(9400585, False, 400, 100)
sm.sendDelay(250)
sm.moveNpcByTemplateId(9400582, True, 500, 80)
sm.sendDelay(500)
sm.forcedMove(True, 1000)
sm.sendDelay(1000)
sm.flipNpcByTemplateId(9400580, True)
sm.sendDelay(4000)
sm.setInnerOverrideSpeakerTemplateID(9400582) # Cayne
sm.sendNext("#face0#You there! ")
sm.setInnerOverrideSpeakerTemplateID(9400585) # Afinas Soldier
sm.sendSay("Yes, sir! ")
sm.setInnerOverrideSpeakerTemplateID(9400582) # Cayne
sm.sendSay("#face0#Report to Alika. Stay by her side until I return. ")
sm.setInnerOverrideSpeakerTemplateID(9400585) # Afinas Soldier
sm.sendSay("Understood, sir. ")
sm.moveNpcByTemplateId(9400585, False, 500, 130)
sm.sendDelay(250)
sm.moveNpcByTemplateId(9400585, False, 500, 130)
sm.sendDelay(250)
sm.moveNpcByTemplateId(9400582, True, 500, 80)
sm.sendDelay(1500)
sm.blind(True, 255, 0, 0, 0, 500)
sm.sendDelay(500)
sm.lockInGameUI(False, True)
sm.warp(867200420)
