# id 867202313 (Abrup Basin : Skuas), field 867202313
sm.lockInGameUI(True, False)
sm.spawnNpc(9400580, -700, 80)
sm.showNpcSpecialActionByTemplateId(9400580, "summon", 0)
sm.spawnNpc(9400638, -600, 80)
sm.showNpcSpecialActionByTemplateId(9400638, "summon", 0)
sm.moveNpcByTemplateId(9400580, True, 300, 150)
sm.moveNpcByTemplateId(9400638, True, 300, 120)
sm.blind(True, 255, 0, 0, 0, 0)
sm.sendDelay(1200)
sm.blind(False, 0, 0, 0, 0, 1000)
sm.sendDelay(1400)
sm.sendDelay(1000)
sm.setSpeakerType(3)
sm.setParam(37)
sm.setColor(1)
sm.setInnerOverrideSpeakerTemplateID(9400580) # Alika
sm.sendNext("#face5##h0#! I told you not to go. Why didn't you listen?! ")
sm.setParam(57)
sm.sendSay("#bHere...")
sm.setParam(37)
sm.sendSay("#face4#What...?")
sm.setParam(57)
sm.sendSay("#bIt's Jellyrash tentacles. Maybe they'll work as rope? ")
sm.setParam(37)
sm.setInnerOverrideSpeakerTemplateID(9400604) # Miner
sm.sendSay("Well, it's disgusting... but very tough. It should hold. ")
sm.setInnerOverrideSpeakerTemplateID(9400580) # Alika
sm.sendSay("#face0#Really?")
sm.setInnerOverrideSpeakerTemplateID(9400604) # Miner
sm.sendSay("I'll give it a go, and let you know when it's ready! ")
sm.flipNpcByTemplateId(9400638, False)
sm.sendDelay(500)
sm.moveNpcByTemplateId(9400638, False, 1000, 150)
sm.sendDelay(500)
sm.setInnerOverrideSpeakerTemplateID(9400580) # Alika
sm.sendNext("#face4#I was so worried... I shouldn't have told you... ")
sm.setParam(57)
sm.sendSay("#bWe need that catapult. And you can see, I'm fine. ")
sm.setParam(37)
sm.sendSay("#face4#But I'm not fine! We need you, #h0#. Everyone who fought and prepared with you for this battle needs you. ")
sm.sendSay("#face4##h0#, you are far, far more important than the catapult. If anything had happened, we'd have to fight this battle without you. ")
sm.setParam(57)
sm.sendSay("#b...I'm sorry. ")
sm.setParam(37)
sm.sendSay("#face5#Then stop putting yourself at risk. Listen to me, alright? ")
sm.setParam(57)
sm.sendSay("#bAlright.")
sm.sendSay("#bAlika, listen... I saw red snow out there. On the edge of the forest. ")
sm.setParam(37)
sm.sendSay("#face4#Red snow...?")
sm.setParam(57)
sm.sendSay("#bThe attack will come soon. We have to get everyone ready.")
sm.spawnNpc(9400639, -350, 80)
sm.showNpcSpecialActionByTemplateId(9400639, "summon", 0)
sm.spawnNpc(9400640, -250, 80)
sm.showNpcSpecialActionByTemplateId(9400640, "summon", 0)
sm.moveNpcByTemplateId(9400639, True, 500, 200)
sm.moveNpcByTemplateId(9400640, True, 500, 200)
sm.sendDelay(1000)
sm.setParam(37)
sm.setInnerOverrideSpeakerTemplateID(9400604) # Miner
sm.sendNext("Scholar Alika! It's ready! ")
sm.flipNpcByTemplateId(9400580, False)
sm.setInnerOverrideSpeakerTemplateID(9400580) # Alika
sm.sendSay("#face2#It is? ")
sm.setInnerOverrideSpeakerTemplateID(9400604) # Miner
sm.sendSay("Very much so! I followed your instructions, and now it's thirty times stronger than before! ")
sm.setParam(57)
sm.sendSay("#bYou're not talking about the catapult, are you? ")
sm.setParam(37)
sm.sendSay("I'm talking about mines! ")
sm.setParam(57)
sm.sendSay("#bMines?! ")
sm.setParam(37)
sm.sendSay("Scholar Alika showed us how to make mines out of the gunpowder we use for blasting tunnels! ")
sm.setParam(57)
sm.sendSay("#bAlika, that's amazing! How do you know how to do that? ")
sm.setParam(37)
sm.setInnerOverrideSpeakerTemplateID(9400580) # Alika
sm.sendSay("#face1#Hey, the history of gunpowder is fascinating reading. I'm just glad I remembered the proportions right. Or maybe I didn't, if it's that powerful... ")
sm.setInnerOverrideSpeakerTemplateID(9400604) # Miner
sm.sendSay("Ba ha ha, incredible! Ingenious! I hope you'll let us pick your brain some more before you leave.")
sm.sendSay("Oh, but you'll want to see them in action, right? Here we go... ")
sm.sendSay("Cover your ears! ")
sm.flipNpcByTemplateId(9400640, False)
sm.moveNpcByTemplateId(9400640, False, 100, 100)
sm.sendDelay(1000)
sm.showNpcSpecialActionByTemplateId(9400640, "mine", 0)
sm.sendDelay(500)
sm.spawnNpc(9400579, -750, 80)
sm.showNpcSpecialActionByTemplateId(9400579, "summon", 0)
sm.sendDelay(500)
sm.spawnNpc(9400579, -550, 80)
sm.showNpcSpecialActionByTemplateId(9400579, "summon", 0)
sm.sendDelay(1000)
sm.showNpcSpecialActionByTemplateId(9400579, "special1", 0)
sm.sendDelay(500)
sm.showNpcSpecialActionByTemplateId(9400579, "special1", 0)
sm.sendDelay(2500)
sm.flipNpcByTemplateId(9400640, True)
sm.moveNpcByTemplateId(9400640, True, 100, 100)
sm.sendNext("Ha HA! How do ya like THAT?! ")
sm.spawnNpc(9400600, -400, 70)
sm.showNpcSpecialActionByTemplateId(9400600, "summon", 0)
sm.spawnNpc(9400588, -350, 70)
sm.showNpcSpecialActionByTemplateId(9400588, "summon", 0)
sm.spawnNpc(9400582, -300, 70)
sm.showNpcSpecialActionByTemplateId(9400582, "summon", 0)
sm.moveNpcByTemplateId(9400600, True, 250, 200)
sm.moveNpcByTemplateId(9400588, True, 250, 200)
sm.moveNpcByTemplateId(9400582, True, 250, 200)
sm.sendDelay(2000)
sm.setInnerOverrideSpeakerTemplateID(9400600) # Birna
sm.sendNext("What's happening?! ")
sm.setInnerOverrideSpeakerTemplateID(9400588) # Ullan
sm.sendSay("Are we under attack?! ")
sm.setInnerOverrideSpeakerTemplateID(9400582) # Cayne
sm.sendSay("#face0#Alika! Alika, where are you?! ")
sm.flipNpcByTemplateId(9400600, False)
sm.sendDelay(500)
sm.flipNpcByTemplateId(9400582, False)
sm.flipNpcByTemplateId(9400600, True)
sm.sendDelay(500)
sm.flipNpcByTemplateId(9400588, False)
sm.sendDelay(500)
sm.flipNpcByTemplateId(9400582, True)
sm.sendDelay(500)
sm.flipNpcByTemplateId(9400588, True)
sm.setInnerOverrideSpeakerTemplateID(9400600) # Birna
sm.sendNext("What was that terrible noise...? ")
sm.setInnerOverrideSpeakerTemplateID(9400604) # Miner
sm.sendSay("Behold, Chief! A Skuas-made mine! ")
sm.setInnerOverrideSpeakerTemplateID(9400600) # Birna
sm.sendSay("But how...")
sm.playSound("Sound/PL_MONAD.img/EP1/ACT3/horn1", 128)
sm.sendDelay(1000)
sm.forcedFlip(True)
sm.flipNpcByTemplateId(9400580, True)
sm.sendDelay(1000)
sm.setInnerOverrideSpeakerTemplateID(9400603) # Guard
sm.sendNext("Gates! Open up the gates! ")
sm.sendSay("Right now! ")
sm.blind(True, 255, 0, 0, 0, 500)
sm.sendDelay(500)
sm.lockInGameUI(False, True)
sm.completeQuestNoCheck(64134)
sm.startQuest(64135)
sm.warp(867202203)
