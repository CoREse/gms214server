# id 940200217 (Arcana : Near the Floral Flute), field 940200217
sm.lockInGameUI(True, False)
sm.removeAdditionalEffect()
sm.blind(True, 255, 0, 0, 0, 0)
sm.zoomCamera(0, 1000, 0, 910, -230)
sm.spawnNpc(3003350, 1040, -210)
sm.showNpcSpecialActionByTemplateId(3003350, "summon", 0)
sm.spawnNpc(3003351, 1100, -210)
sm.showNpcSpecialActionByTemplateId(3003351, "summon", 0)
sm.sendDelay(1000)
sm.blind(False, 0, 0, 0, 0, 1500)
sm.setSpeakerType(3)
sm.setParam(37)
sm.setColor(1)
sm.setInnerOverrideSpeakerTemplateID(3003301) # Small Spirit
sm.sendNext("#face1#Okay! The cutting is planted. Now it's all up to the moon... Please flute, grow! Please...")
sm.zoomCamera(0, 1000, 0, 910, -230)
sm.showFadeTransition(0, 1000, 3000)
sm.zoomCamera(0, 1000, 2147483647, 2147483647, 2147483647)
sm.moveCamera(True, 0, 0, 0)
sm.sendDelay(300)
sm.removeOverlapScreen(1000)
sm.zoomCamera(0, 1000, 0, 910, -230)
sm.spawnNpc(3003364, 910, -210)
sm.showNpcSpecialActionByTemplateId(3003364, "summon", 0)
sm.resetNpcSpecialActionByTemplateId(3003364)
sm.showNpcSpecialActionByTemplateId(3003364, "revive", 1530)
sm.sendDelay(1530)
sm.resetNpcSpecialActionByTemplateId(3003364)
sm.showNpcSpecialActionByTemplateId(3003364, "normal", -1)
sm.sendNext("#face0#!!")
sm.sendSay("#face4#(Sobs) The Floral Flute...")
sm.sendSay("#face4#It's been revitalized! All it really needed was moonlight.")
sm.setInnerOverrideSpeakerTemplateID(3003302) # Wind Spirit
sm.sendSay("#face2#Neither sun nor light of stars will do~ Only the moon can make you bloom~")
sm.resetNpcSpecialActionByTemplateId(3003364)
sm.showNpcSpecialActionByTemplateId(3003364, "normal_ani", -1)
sm.playSound("Sound/SoundEff.img/ArcaneRiver/leaf", 200)
sm.sendDelay(2000)
sm.setInnerOverrideSpeakerTemplateID(3003301) # Small Spirit
sm.sendNext("#face4#What a beautiful sound! What a relief... Then there's still hope.")
sm.sendSay("#face3#Hahaha! I feel like back in the good old days.")
sm.sendSay("#face3#(Giggles) Say, do you think there have been any changes to the Spirit Tree? I want to go see! Hey, Wind Spirit! Take us to the Spirit Tree!")
sm.setInnerOverrideSpeakerTemplateID(3003302) # Wind Spirit
sm.sendSay("#face1#Yes, yes! Faster than wind, lighter than air! Wooosh, woosh! Away we fly~")
sm.resetNpcSpecialActionByTemplateId(3003351)
sm.showNpcSpecialActionByTemplateId(3003351, "wind", 1920)
sm.playSound("Sound/SoundEff.img/ArcaneRiver/wind", 100)
sm.sendDelay(500)
sm.showEffect("Effect/OnUserEff.img/arcana/windOn", 0, 0, 0, 0, 176755346, 0, 0)
sm.showEffect("Effect/OnUserEff.img/arcana/windOn", 0, 0, 0, 0, 0, 0, 0)
sm.showEffect("Effect/OnUserEff.img/arcana/windOn", 0, 0, 0, 0, 176755346, 0, 0)
sm.showEffect("Effect/OnUserEff.img/arcana/windOn", 0, 0, 0, 0, 0, 0, 0)
sm.resetNpcSpecialActionByTemplateId(3003351)
sm.showNpcSpecialActionByTemplateId(3003351, "wind3", 1920)
sm.sendDelay(1900)
sm.showEffect("Effect/OnUserEff.img/arcana/windOn", 0, 0, 0, 0, 176755346, 0, 0)
sm.showEffect("Effect/OnUserEff.img/arcana/windOn", 0, 0, 0, 0, 0, 0, 0)
sm.blind(True, 255, 0, 0, 0, 500)
sm.sendDelay(500)
sm.lockInGameUI(False, True)
sm.warp(940200207)
