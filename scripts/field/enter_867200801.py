# id 867200801 (Abrup Basin : Abandoned Village), field 867200801
sm.lockInGameUI(True, False)
sm.spawnNpc(9400590, -620, 300)
sm.showNpcSpecialActionByTemplateId(9400590, "summon", 0)
sm.spawnNpc(9400592, -565, 300)
sm.showNpcSpecialActionByTemplateId(9400592, "summon", 0)
sm.spawnNpc(9400580, -390, 300)
sm.showNpcSpecialActionByTemplateId(9400580, "summon", 0)
sm.spawnNpc(9400582, -335, 300)
sm.showNpcSpecialActionByTemplateId(9400582, "summon", 0)
sm.startQuest(64164)
sm.spawnNpc(9400583, -285, 300)
sm.showNpcSpecialActionByTemplateId(9400583, "summon", 0)
sm.spawnNpc(9400589, -220, 300)
sm.showNpcSpecialActionByTemplateId(9400589, "summon", 0)
sm.spawnNpc(9400588, -160, 300)
sm.showNpcSpecialActionByTemplateId(9400588, "summon", 0)
sm.startQuest(64161)
sm.spawnNpc(9400581, -80, 300)
sm.showNpcSpecialActionByTemplateId(9400581, "summon", 0)
sm.startQuest(64163)
sm.spawnNpc(9400591, 0, 300)
sm.showNpcSpecialActionByTemplateId(9400591, "summon", 0)
sm.spawnNpc(9400587, 60, 300)
sm.showNpcSpecialActionByTemplateId(9400587, "summon", 0)
sm.moveNpcByTemplateId(9400587, False, 350, 200)
sm.sendDelay(2000)
sm.showEffect("Effect/OnUserEff.img/emotionBalloon/exclamation", 1000, 0, 0, 0, 32753666, 0, 0)
sm.moveNpcByTemplateId(9400591, False, 300, 200)
sm.sendDelay(2000)
sm.setSpeakerType(3)
sm.setParam(37)
sm.setColor(1)
sm.setInnerOverrideSpeakerTemplateID(9400587) # Kan
sm.sendNext("#face0#What happened? ")
sm.sendDelay(2000)
sm.flipNpcByTemplateId(9400587, True)
sm.sendDelay(500)
sm.flipNpcByTemplateId(9400587, False)
sm.sendDelay(500)
sm.flipNpcByTemplateId(9400591, True)
sm.sendDelay(500)
sm.flipNpcByTemplateId(9400591, False)
sm.sendDelay(500)
sm.sendDelay(2000)
sm.setInnerOverrideSpeakerTemplateID(9400591) # Shulla
sm.sendNext("Where should we go now...? ")
sm.sendDelay(2000)
sm.sendDelay(250)
sm.moveNpcByTemplateId(9400581, False, 50, 100)
sm.startQuest(64163)
sm.sendDelay(2000)
sm.setInnerOverrideSpeakerTemplateID(9400581) # Butler
sm.sendNext("#face0##h0#, I believe we should make a brief stop and then head out again. ")
sm.flipNpcByTemplateId(9400581, True)
sm.sendDelay(500)
sm.flipNpcByTemplateId(9400587, True)
sm.moveNpcByTemplateId(9400587, True, 370, 100)
sm.sendDelay(1000)
sm.setInnerOverrideSpeakerTemplateID(9400583) # Gillie
sm.sendNext("#face1#Vice Captain, many of the knights were injured along the way. We need to stop so they can be treated. ")
sm.setInnerOverrideSpeakerTemplateID(9400589) # Peytour
sm.sendSay("#face0#The people are also exhausted from the hunger and cold. They need time. ")
sm.setInnerOverrideSpeakerTemplateID(9400581) # Butler
sm.sendSay("#face0#Our priority is to reach a safe place as soon as possible. ")
sm.setInnerOverrideSpeakerTemplateID(9400587) # Kan
sm.sendSay("#face1#Vice Captain Butler is right. I know it will be tough, but we should get moving right away. ")
sm.sendDelay(1000)
sm.createQuestWithQRValue(49014, "QET=20190623122238")
sm.createQuestWithQRValue(49000, "count=1;Quest=49014;day=152844;QET=20190623112957;state=1")
sm.createQuestWithQRValue(49000, "count=1;Quest=49014;day=152844;QET=20190623112957;state=2")
sm.createQuestWithQRValue(49000, "count=1;Quest=49014;day=152844;QET=20190623115238;state=2")
sm.startQuest(49014)
sm.setInnerOverrideSpeakerTemplateID(9400581) # Butler
sm.sendNext("#face0#What would you have me do, #h0#? ")
sm.flipNpcByTemplateId(9400588, True)
sm.sendDelay(200)
sm.flipNpcByTemplateId(9400589, True)
sm.sendDelay(200)
sm.flipNpcByTemplateId(9400583, True)
sm.sendDelay(200)
sm.flipNpcByTemplateId(9400582, True)
sm.sendDelay(200)
sm.flipNpcByTemplateId(9400580, True)
sm.sendDelay(1000)
sm.flipNpcByTemplateId(9400591, True)
sm.moveNpcByTemplateId(9400591, True, 200, 100)
sm.setInnerOverrideSpeakerTemplateID(9400580) # Alika
sm.sendNext("#face0#If you push everyone to set out again, we're sure to have injuries. Especially since night has fallen. ")
sm.sendSay("#face0#On the bright side, we do have some time before the snowstorm catches up to us. That should allow us to rest a little, at least. ")
sm.sendSay("#face0#We need to build a fire for warmth and cooking first. ")
sm.setParam(57)
res = sm.sendNext("#b(Both Alika and Vice Captain Butler have good points...)\r\n#L0# 'We should rest first.' #l\r\n#L1# 'We should set out immediately.'#l")
sm.sendNext("#bYeah, I think it would be better to rest before we push everyone further. ")
sm.setParam(37)
sm.setInnerOverrideSpeakerTemplateID(9400581) # Butler
sm.sendSay("#face1#Hmph! ")
sm.setInnerOverrideSpeakerTemplateID(9400589) # Peytour
sm.sendSay("#face0#All right everyone, get moving! ")
sm.flipNpcByTemplateId(9400589, False)
sm.sendDelay(500)
sm.moveNpcByTemplateId(9400589, False, 1000, 100)
sm.sendDelay(1000)
sm.flipNpcByTemplateId(9400588, False)
sm.flipNpcByTemplateId(9400583, False)
sm.flipNpcByTemplateId(9400582, False)
sm.flipNpcByTemplateId(9400580, False)
sm.sendDelay(500)
sm.moveNpcByTemplateId(9400588, False, 500, 100)
sm.moveNpcByTemplateId(9400583, False, 500, 100)
sm.sendDelay(500)
sm.moveNpcByTemplateId(9400582, False, 500, 100)
sm.moveNpcByTemplateId(9400580, False, 500, 100)
sm.sendDelay(500)
sm.moveNpcByTemplateId(9400592, False, 500, 100)
sm.moveNpcByTemplateId(9400590, False, 500, 100)
sm.sendDelay(1000)
sm.blind(True, 255, 0, 0, 0, 500)
sm.sendDelay(500)
sm.lockInGameUI(False, True)
sm.startQuest(64057)
sm.completeQuestNoCheck(64035)
sm.warp(867200800)
