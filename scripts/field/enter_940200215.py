# id 940200215 (Arcana : Grove of the Spirit Tree), field 940200215
sm.startQuest(34479)
sm.completeQuestNoCheck(34487)
sm.startQuest(34489)
sm.lockInGameUI(True, False)
sm.removeAdditionalEffect()
sm.spawnNpc(3003350, 185, 25)
sm.showNpcSpecialActionByTemplateId(3003350, "summon", 0)
sm.spawnNpc(3003362, 312, 25)
sm.showNpcSpecialActionByTemplateId(3003362, "summon", 0)
sm.spawnNpc(3003351, 415, 25)
sm.showNpcSpecialActionByTemplateId(3003351, "summon", 0)
sm.spawnNpc(3003358, 1125, 25)
sm.showNpcSpecialActionByTemplateId(3003358, "summon", 0)
sm.spawnNpc(3003361, -470, 25)
sm.showNpcSpecialActionByTemplateId(3003361, "summon", 0)
sm.spawnNpc(3003361, -530, 25)
sm.showNpcSpecialActionByTemplateId(3003361, "summon", 0)
sm.flipNpcByTemplateId(3003362, True)
sm.showNpcSpecialActionByTemplateId(3003362, "down", -1)
sm.showNpcSpecialActionByTemplateId(3003350, "cry", -1)
sm.blind(True, 255, 0, 0, 0, 0)
sm.zoomCamera(0, 1000, 0, 325, 25)
sm.sendDelay(1000)
sm.blind(False, 0, 0, 0, 0, 1000)
sm.setSpeakerType(3)
sm.setParam(37)
sm.setColor(1)
sm.setInnerOverrideSpeakerTemplateID(3003301) # Small Spirit
sm.sendNext("#face4##b(Sobs)#k You've been fighting alone all this time...")
sm.sendSay("#face4#You used up all your strength to prevent the corruption from spreading throughout the forest... #b(Sniffs)#k That's why your leaves withered and grayed.")
sm.moveNpcByTemplateId(3003358, True, 520, 160)
sm.moveNpcByTemplateId(3003361, False, 450, 160)
sm.moveNpcByTemplateId(3003361, False, 450, 160)
sm.playSound("Sound/Foot.img/leaf/0", 200)
sm.sendDelay(50)
sm.playSound("Sound/Foot.img/leaf/1", 200)
sm.sendDelay(300)
sm.playSound("Sound/Foot.img/leaf/1", 200)
sm.sendDelay(500)
sm.playSound("Sound/Foot.img/leaf/2", 200)
sm.sendDelay(300)
sm.playSound("Sound/Foot.img/leaf/3", 200)
sm.sendDelay(50)
sm.playSound("Sound/Foot.img/leaf/1", 200)
sm.sendDelay(500)
sm.playSound("Sound/Foot.img/leaf/4", 200)
sm.sendDelay(500)
sm.playSound("Sound/Foot.img/leaf/5", 200)
sm.sendDelay(50)
sm.playSound("Sound/Foot.img/leaf/1", 200)
sm.sendDelay(300)
sm.playSound("Sound/Foot.img/leaf/2", 200)
sm.sendDelay(500)
sm.playSound("Sound/Foot.img/leaf/1", 200)
sm.sendDelay(50)
sm.playSound("Sound/Foot.img/leaf/1", 200)
sm.sendDelay(300)
sm.playSound("Sound/Foot.img/leaf/2", 200)
sm.sendDelay(500)
sm.playSound("Sound/Foot.img/leaf/5", 200)
sm.setInnerOverrideSpeakerTemplateID(3003309) # Tree Spirits
sm.sendNext("#face0#The S-spirit Tree!")
sm.setInnerOverrideSpeakerTemplateID(3003314) # Rock Spirit
sm.sendSay("#face0#The dawkness is fading away!")
sm.setInnerOverrideSpeakerTemplateID(3003301) # Small Spirit
sm.sendSay("#face7#Don't you see, everybody?")
sm.zoomCamera(1000, 2000, 1000, 312, 180)
sm.sendDelay(1000)
sm.sendNext("#face4#He was protecting us all along!")
sm.sendSay("#face7#Even though it cost him everything...")
sm.sendSay("#face4##b(Sobs)#k Please open your eyes...")
sm.sendDelay(1000)
sm.setInnerOverrideSpeakerTemplateID(3003302) # Wind Spirit
sm.sendNext("#face1#The miracle is already around us. It sprouts beneath our feet,\r\nit blooms in the starlight, it sips from the lagoon.")
sm.showEffect("Effect/OnUserEff.img/emotion/oh", 0, 0, 0, 0, 143478977, 0, 0)
sm.showEffect("Effect/OnUserEff.img/emotion/oh", 0, 0, 0, 0, 143478980, 0, 0)
sm.showEffect("Effect/OnUserEff.img/emotion/oh", 0, 0, 0, 0, 143478981, 0, 0)
sm.showEffect("Effect/OnUserEff.img/emotion/oh", 0, 0, 0, 0, 143478982, 0, 0)
sm.sendSay("#face2#It toots and it twangs, it drips and it drops~ \r\nListen, to the #bsong of the forest#k~")
sm.zoomCamera(1000, 1000, 1000, 325, 25)
sm.sendDelay(1000)
sm.playSound("Sound/SoundEff.img/ArcaneRiver/tree_revive", 100)
sm.sendDelay(5000)
sm.blind(True, 255, 240, 240, 240, 1300)
sm.sendDelay(1600)
sm.changeBGM("Bgm47.img/TheTuneOfAzureLight", 0, 0)
sm.completeQuestNoCheck(34479)
sm.startQuest(34487)
sm.completeQuestNoCheck(34489)
sm.blind(True, 255, 240, 240, 240, 1000)
sm.sendDelay(1000)
sm.completeQuestNoCheck(34457)
sm.sendDelay(1000)
sm.sendDelay(2000)
sm.blind(False, 0, 0, 0, 0, 3000)
sm.playSound("Sound/SoundEff.img/ArcaneRiver/wind", 100)
sm.sendDelay(3000)
sm.zoomCamera(1000, 2000, 1000, 312, 180)
sm.sendDelay(2000)
sm.showFadeTransition(0, 1000, 3000)
sm.zoomCamera(0, 1000, 2147483647, 2147483647, 2147483647)
sm.moveCamera(True, 0, 0, 0)
sm.sendDelay(300)
sm.removeOverlapScreen(1000)
sm.zoomCamera(0, 2000, 0, 312, 180)
sm.resetNpcSpecialActionByTemplateId(3003362)
sm.setInnerOverrideSpeakerTemplateID(3003324) # Spirit of Harmony
sm.sendNext("#face0#H-huh...?")
sm.setInnerOverrideSpeakerTemplateID(3003309) # Tree Spirits
sm.sendSay("#face0#The Spirit Tree... It's been revived...!")
sm.setInnerOverrideSpeakerTemplateID(3003301) # Small Spirit
sm.sendSay("#face4##b(Cries)#k I'm so relieved.")
sm.setInnerOverrideSpeakerTemplateID(3003302) # Wind Spirit
sm.sendSay("#face1#Hehe. Well, if it isn't my favorite plump friend! Plump~ Plumpity~")
sm.blind(True, 255, 0, 0, 0, 5000)
sm.setInnerOverrideSpeakerTemplateID(3003314) # Rock Spirit
sm.sendSay("#face0#Brudders, a new fwend! Wet's pway a game! It wiww be fun!")
sm.setInnerOverrideSpeakerTemplateID(3003302) # Wind Spirit
sm.sendSay("#face2#Fun? That's my specialty! Fun~ fun~ fun~")
sm.setInnerOverrideSpeakerTemplateID(3003309) # Tree Spirits
sm.sendSay("#face0#No! The Spirit Tree is still weak. Rest first... Fun later.")
sm.setInnerOverrideSpeakerTemplateID(3003301) # Small Spirit
sm.sendSay("#face7#Hmm... The Tree Spirits are right!")
sm.blind(True, 255, 0, 0, 0, 500)
sm.sendDelay(500)
sm.changeBGM("Bgm00.img/Silence", 0, 0)
sm.sendDelay(300)
sm.sendDelay(600)
sm.moveCamera(True, 0, 0, 0)
sm.lockInGameUI(False, True)
sm.warp(450005000)
